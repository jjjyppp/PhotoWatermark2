# 水印批量处理工具（PhotoWatermark）

## 项目简介
PhotoWatermark 是一款功能强大的图片水印处理工具，支持批量添加文本和图片水印，提供丰富的自定义选项和直观的用户界面，帮助您快速保护和个性化您的图片。

## 功能特性

### 1. 文件处理

#### 1.1 导入图片
- **多种导入方式**：支持单张图片拖拽到最左栏导入或通过文件选择器导入
- **批量导入**：可一次性选择多张图片或直接导入整个文件夹
- **图片列表**：在界面上以缩略图和文件名形式显示已导入图片

#### 1.2 支持格式
- **输入格式**：支持 JPEG、PNG、BMP、TIFF 等主流图片格式
- **特殊支持**：PNG 格式完全支持透明通道
- **输出格式**：用户可选择输出为 JPEG 或 PNG 格式

#### 1.3 导出图片
- **安全导出**：为防止覆盖原图，默认禁止导出到原文件夹
- **命名规则**：提供多种文件命名选项：
  - 保留原文件名
  - 添加自定义前缀（如 wm_）
  - 添加自定义后缀（如 _watermarked）
- **质量调节**：对于 JPEG 格式，提供图片质量（压缩率）调节滑块（0-100）
- **尺寸调整**：导出时允许用户调整图片尺寸（如按宽度、高度或百分比缩放）

### 2. 水印类型

#### 2.1 文本水印
- **自定义内容**：用户可输入任意文本作为水印
- **字体设置**：可选择系统已安装的字体、调整字号、设置粗体和斜体
- **颜色选择**：提供调色板让用户选择字体颜色
- **透明度调节**：可调节文本水印的透明度（0-100%）
- **样式增强**：可添加阴影或描边效果，增强在复杂背景下的可读性

#### 2.2 图片水印
- **自定义图片**：用户可从本地选择图片（如公司Logo）作为水印
- **透明通道支持**：必须支持带透明通道的 PNG 图片
- **缩放控制**：可按比例或自由调整图片水印的大小
- **透明度调节**：可调节图片水印的整体透明度（0-100%）

### 3. 水印布局与样式

#### 3.1 实时预览
- 所有对水印的调整都在主预览窗口中实时显示效果
- 用户可以点击图片列表切换预览不同的图片

#### 3.2 位置控制
- **预设位置**：提供九宫格布局（四角、正中心），用户可一键定位水印
- **手动拖拽**：用户可以直接在预览图上通过鼠标拖拽水印到任意位置

#### 3.3 旋转功能
- 提供滑块或输入框，允许用户以任意角度旋转水印

### 4. 配置管理

#### 4.1 水印模板
- **保存模板**：用户可以将当前的水印设置（包括水印内容、字体、颜色、位置、大小、透明度等所有参数）保存为一个模板
- **模板管理**：用户可以加载、管理和删除已保存的模板
- **自动恢复**：程序启动时可自动加载上一次关闭时的设置

## 运行指南

### 方式一：使用可执行文件（推荐）
1. 从 `dist` 目录中找到 `PhotoWatermark.exe` 文件
2. 无需安装，直接双击运行

### 方式二：从源码运行
1. 确保已安装 Python 3.10 或更高版本
2. 安装项目依赖：
```bash
pip install -r requirements.txt
```
3. 运行程序：
```bash
python -m app
```

## 使用指南

### 基本流程
1. **导入图片**：通过直接拖拽图片到最左栏或文件选择器导入一张或多张图片
2. **设置水印**：选择文本水印或图片水印，并自定义相关参数
3. **调整布局**：选择预设位置或手动拖拽水印到理想位置
4. **预览效果**：在预览窗口中查看水印效果，可点击图片列表切换不同图片
5. **导出图片**：选择输出格式、质量和保存位置，点击导出按钮完成处理

### 高级功能
- **保存模板**：调整完水印参数后，点击"保存模板"按钮，为模板命名并保存
- **加载模板**：从模板下拉列表中选择已保存的模板，快速应用之前的水印设置
- **批量处理**：将模板应用到所有图片，所有图片将应用相同的水印设置
- **调整输出设置**：在导出对话框中，可以设置输出格式、质量、命名规则和尺寸

## 目录结构
```
app/
├── __init__.py       # 包初始化文件
├── __main__.py       # 程序入口
├── main.py           # 主程序逻辑
├── core/             # 核心功能模块
│   ├── models.py     # 数据模型定义
│   ├── templates.py  # 模板管理功能
│   └── watermark_engine.py  # 水印处理引擎
└── ui/               # 用户界面模块
    ├── main_window.py # 主窗口界面
    ├── export_dialog.py # 导出对话框
    ├── theme.py      # 界面主题设置
    └── widgets/      # 自定义组件
```

## 注意事项
1. 为了避免意外覆盖原图，程序默认禁止导出到原图片所在的文件夹
2. 使用 PNG 格式作为水印图片时，可以充分利用其透明通道特性
3. 导出时调整图片质量和尺寸会影响输出文件的大小和清晰度
4. 保存的模板会存储所有水印相关参数，方便重复使用

感谢使用 PhotoWatermark 水印批量处理工具！


